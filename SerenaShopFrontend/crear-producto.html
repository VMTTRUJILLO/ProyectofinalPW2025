<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Producto - Admin</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

    <header class="header">
        <h1>Panel Admin - Crear Producto</h1>
        <a href="admin.html" class="btn-volver">Volver</a>
    </header>

    <main class="admin-container">

        <form id="crearProductoForm" class="admin-form">
            <h2>Nuevo Producto</h2>

            <label>Nombre:</label>
            <input type="text" id="nombre" required>


            <label>Precio:</label>
            <input type="number" id="precio" step="0.01" required>

            <label>Stock:</label>
            <input type="number" id="stock" required>

            <label>Nombre del archivo de imagen:</label>
            <input type="text" id="imagen" placeholder="producto1.jpg" required>

            <button type="submit" class="btn-primary">Crear Producto</button>
        </form>

    </main>

    <script type="module">
        import * as api from "./js/api.js";

        document.getElementById("crearProductoForm").addEventListener("submit", async (e) => {
            e.preventDefault();

            const nuevo = {
                nombre: nombre.value,
                descripcion: descripcion.value,
                precio: parseFloat(precio.value),
                stock: parseInt(stock.value),
                imagen: imagen.value, // SOLO nombre del archivo
            };

            try {
                await api.createProducto(nuevo);
                alert("Producto creado exitosamente");
                window.location.href = "admin.html";
            } catch (error) {
                console.error(error);
                alert("Error creando producto");
            }
        });
    </script>

</body>
</html>